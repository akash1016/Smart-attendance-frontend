import React, {useRef, useState, useEffect} from 'react';import Webcam from 'react-webcam';export default function TeacherPanel(){const webcamRef=useRef(null);const [running,setRunning]=useState(false);const [status,setStatus]=useState('');useEffect(()=>{let id; if(running){id=setInterval(capture,3000);} return ()=>clearInterval(id)},[running]);async function capture(){const src=webcamRef.current.getScreenshot();const blob=await (await fetch(src)).blob();const fd=new FormData();fd.append('frame',blob,'frame.jpg');try{const res=await fetch('http://127.0.0.1:5000/attendance/mark',{method:'POST',body:fd});const j=await res.json();setStatus(j.msg+' '+(j.conf?('conf='+j.conf):''));}catch(e){setStatus('error')} }return (<div style={{border:'1px solid #ddd',padding:12}}><h3>Teacher - Start Attendance</h3><Webcam audio={false} ref={webcamRef} screenshotFormat='image/jpeg' width={320} height={240}/><div style={{marginTop:8}}><button onClick={()=>setRunning(true)}>Start</button><button onClick={()=>setRunning(false)} style={{marginLeft:8}}>Stop</button></div><p>Status: {status}</p></div>)}